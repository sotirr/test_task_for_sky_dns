
# Readme

Данный репозиторий содержит выполненное тестовое задание на позицию "Разработчик Python"

## Текст задания

Задание. Разработать простейшее вэб-приложение (раз уж проект будет на Django, то и решение ожидаем на нём) и выложить  качестве git-репозитория для оценки.  

Две страницы:  
а. Главная  (url /) с простой формой с 1 полем для ввода e-mail и кнопкой Отправить, форму снабдить csrf-токеном, для защиты от подделки  
б. /api — для обслуживания API запросов. Дабы не усложнять, пускай, защиты csrf не нужно, параметры мы будет передавать в стиле GET-запроса, типа `localhost:8080/api?method=ping`, но тем не менее на запросы GET представление (view) отвечает ошибкой 404, а на POST запрос отвечает 200 в случае если есть GET-параметр `method` равен `ping`, иначе отвечает 400. Содержимое ответа не важно, можно пустым возвращать  
в) обращения к страницам логгировать (можно в консоль или в файл). Информацию о запросе представить словарём вида `{time: <время обращения>, url: <собственно url страницы>, method: <POST/GET>, status: <число статус ответа которое мы вернули>, params: <переданные нам параметры, для / это переданный email, для api — переданные параметры строкой без ?>}`

## Установка

1. Клонируем репозиторий с гитхаба

```bash
$ git clone git@github.com/sotirr/home_bookkeeping.git
$ cd home_bookkeeping
```

2. Активируем ваше виртуальное окружение

3. устанавливаем зависимости

```bash
$ pip install -r requirements.txt
```

4. Запускаем django сервер

```bash
$ python manage.py runserver
```


## Тесты

Каталог с тестами имеет следующую структуру:

```bash
── simple_app
    └── tests
        ├── __init__.py
        ├── tests_middlewares.py
        └── tests_views.py
```

Запуск тестов:

```bash
$ python manage.py test
```

## Логирование

Логирование происходит в файл `requests.log`

Пример логов:

```bash
{'time': '2021-01-22 15:27:00.922', 'url': '/', 'method': 'GET', 'status': 200, 'params': {}}
{'time': '2021-01-22 15:27:03.100', 'url': '/', 'method': 'POST', 'status': 302, 'params': {'email': 'sotirr@gmail.com'}}
{'time': '2021-01-22 15:27:03.114', 'url': '/', 'method': 'GET', 'status': 200, 'params': {}}
{'time': '2021-01-22 15:27:13.236', 'url': '/api', 'method': 'POST', 'status': 200, 'params': {'method': 'ping'}}
{'time': '2021-01-22 15:27:19.198', 'url': '/api', 'method': 'POST', 'status': 400, 'params': {'method': 'ping1'}}
{'time': '2021-01-22 15:27:30.469', 'url': '/api', 'method': 'GET', 'status': 404, 'params': {'method': 'ping'}}
```
